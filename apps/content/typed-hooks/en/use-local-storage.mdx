---
title: useLocalStorage
description: A React hook for managing localStorage with automatic JSON serialization, type safety, and cross-tab synchronization.
links:
  links:
    {
      "useEventListener": "https://shaddy-omega.vercel.app/typed-hooks/use-event-listener",
      "StorageEvent": "https://developer.mozilla.org/en-US/docs/Web/API/Window/storage_event",
    }
---

`useLocalStorage` is a powerful React hook that provides a seamless interface for managing browser localStorage with full TypeScript support. It automatically handles JSON serialization/deserialization, provides type safety, and includes cross-tab synchronization to keep data consistent across multiple browser tabs.

The hook supports complex data types including objects, arrays, and primitive values. It also provides custom serialization options for advanced use cases like Date objects, includes error handling capabilities, and automatically syncs changes across browser tabs using the `storage` event. This hook uses our own custom hook [useEventListener](https://shaddy-omega.vercel.app/typed-hooks/use-event-listener) to listen for storage changes across tabs.

A simple example demonstrating primitive value storage with automatic persistence:

<ComponentPreview name="use-local-storage-basic-example" />

This example shows how to store and manage basic data types like numbers and strings. The counter persists across page refreshes, and the name input maintains its value even when navigating away and back.

### Installation

<CodeTabs>

<TabsList>
  <TabsTrigger value="cli">CLI</TabsTrigger>
  <TabsTrigger value="manual">Manual</TabsTrigger>
</TabsList>

<TabsContent value="cli">
```bash
npx shadcn@latest add https://shaddy-docs.vercel.app/r/use-local-storage
```

</TabsContent>

<TabsContent value="manual">

<Steps>

<Step>Install the following dependencies:</Step>

```bash
npx shadcn@latest add https://shaddy-docs.vercel.app/r/use-event-listener
```

<Step>Copy and paste the following code into your project.</Step>

<ComponentSource name="use-local-storage" />

<Step>Update the import paths to match your project setup.</Step>

</Steps>

</TabsContent>

</CodeTabs>

### Store Complex Objects with Automatic Serialization

Complex object storage with nested properties and automatic serialization:

<ComponentPreview name="use-local-storage-settings-example" />

This example demonstrates storing complex objects with multiple properties. The settings object is automatically serialized to JSON and stored in localStorage, with all changes immediately persisted and synchronized across tabs.

### Form Draft Auto-Save

Automatic form data persistence to prevent data loss during editing:

<ComponentPreview name="use-local-storage-form-example" />

This example shows how to implement auto-save functionality for forms. As users type, their input is automatically saved to localStorage, preventing data loss if they accidentally close the tab or refresh the page.

### Advanced Features with Custom Serialization

Custom serialization for complex data types and multiple storage patterns:

<ComponentPreview name="use-local-storage-advanced-example" />

This advanced example demonstrates custom serialization for Date objects and managing arrays of complex objects like a shopping cart. It shows how to handle data types that don't serialize well with JSON by default.

## API

â–¸ **useLocalStorage**`<T>`(key, initialValue?, options?): `[T, Dispatch<SetStateAction<T>>, () => void]`

### Parameters

| Parameter      | Type                                     | Description                                                                  |
| -------------- | ---------------------------------------- | ---------------------------------------------------------------------------- |
| `key`          | `string`                                 | The localStorage key to store the value under                                |
| `initialValue` | `T \| (() => T) \| undefined`            | The initial value or a function to compute it. Defaults to `undefined`       |
| `options`      | `UseLocalStorageOptions<T> \| undefined` | Optional configuration for serialization, initialization, and error handling |

### Options

The `options` parameter provides advanced configuration:

| Property              | Type                                               | Default          | Description                                                             |
| --------------------- | -------------------------------------------------- | ---------------- | ----------------------------------------------------------------------- |
| `serializer`          | `(value: T) => string \| undefined`                | `JSON.stringify` | Custom function to serialize the value before storing in localStorage   |
| `deserializer`        | `(value: string) => T \| undefined`                | `JSON.parse`     | Custom function to deserialize the value when reading from localStorage |
| `initializeWithValue` | `boolean \| undefined`                             | `true`           | Whether to initialize with value from localStorage on mount             |
| `onError`             | `(error: Error, key: string) => void \| undefined` | Console warning  | Error handler called when localStorage operations fail                  |

### Returns

Returns a tuple with three elements:

| Index | Type                          | Description                                                                       |
| ----- | ----------------------------- | --------------------------------------------------------------------------------- |
| `0`   | `T`                           | The current value from localStorage or the initial value                          |
| `1`   | `Dispatch<SetStateAction<T>>` | A setter function that accepts a value or updater function (same API as useState) |
| `2`   | `() => void`                  | A function to remove the item from localStorage and reset to initial value        |

### Types

```typescript
type UseLocalStorageOptions<T> = {
  serializer?: (value: T) => string;
  deserializer?: (value: string) => T;
  initializeWithValue?: boolean;
  onError?: (error: Error, key: string) => void;
};
```
